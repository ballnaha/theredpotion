{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/theredpotion/apps/customer/theme.ts"],"sourcesContent":["'use client';\r\n\r\nimport { createTheme, ThemeOptions } from '@mui/material/styles';\r\n\r\n// iOS Liquid Glass Color Palette\r\nconst colors = {\r\n  primary: {\r\n    main: 'rgba(0, 122, 255, 0.85)', // iOS Blue with transparency\r\n    light: 'rgba(0, 122, 255, 0.6)',\r\n    dark: 'rgba(0, 122, 255, 1)',\r\n  },\r\n  secondary: {\r\n    main: 'rgba(255, 59, 48, 0.85)', // iOS Red with transparency\r\n    light: 'rgba(255, 59, 48, 0.6)',\r\n    dark: 'rgba(255, 59, 48, 1)',\r\n  },\r\n  background: {\r\n    default: 'rgba(242, 242, 247, 0.9)', // iOS light background with transparency\r\n    paper: 'rgba(255, 255, 255, 0.7)', // Glass effect\r\n    glass: 'rgba(255, 255, 255, 0.25)', // Frosted glass\r\n    glassSecondary: 'rgba(255, 255, 255, 0.15)',\r\n  },\r\n  surface: {\r\n    primary: 'rgba(255, 255, 255, 0.8)',\r\n    secondary: 'rgba(248, 248, 248, 0.9)',\r\n    tertiary: 'rgba(242, 242, 247, 0.8)',\r\n  },\r\n  accent: {\r\n    green: 'rgba(52, 199, 89, 0.85)',\r\n    orange: 'rgba(255, 149, 0, 0.85)',\r\n    purple: 'rgba(175, 82, 222, 0.85)',\r\n    pink: 'rgba(255, 45, 85, 0.85)',\r\n  },\r\n};\r\n\r\n// Glass morphism shadows and blurs\r\nconst glassMorphism = {\r\n  backdrop: 'blur(20px) saturate(180%)',\r\n  backdropSecondary: 'blur(40px) saturate(200%)',\r\n  shadow: {\r\n    glass: '0 8px 32px rgba(31, 38, 135, 0.37)',\r\n    soft: '0 4px 16px rgba(0, 0, 0, 0.1)',\r\n    medium: '0 8px 24px rgba(0, 0, 0, 0.15)',\r\n    strong: '0 12px 40px rgba(0, 0, 0, 0.2)',\r\n  },\r\n  border: 'rgba(255, 255, 255, 0.18)',\r\n};\r\n\r\nconst themeOptions: ThemeOptions = {\r\n  palette: {\r\n    mode: 'light',\r\n    primary: colors.primary,\r\n    secondary: colors.secondary,\r\n    background: colors.background,\r\n    text: {\r\n      primary: 'rgba(0, 0, 0, 0.87)',\r\n      secondary: 'rgba(0, 0, 0, 0.6)',\r\n    },\r\n  },\r\n  typography: {\r\n    fontFamily: [\r\n      '\"Prompt\"',\r\n      '-apple-system',\r\n      'BlinkMacSystemFont',\r\n      '\"SF Pro Display\"',\r\n      '\"SF Pro Text\"',\r\n      '\"Helvetica Neue\"',\r\n      'Arial',\r\n      'sans-serif',\r\n    ].join(','),\r\n    h1: {\r\n      fontSize: '1.75rem',\r\n      fontWeight: 700,\r\n      letterSpacing: '-0.02em',\r\n      '@media (min-width:600px)': {\r\n        fontSize: '2.5rem',\r\n      },\r\n    },\r\n    h2: {\r\n      fontSize: '1.5rem',\r\n      fontWeight: 600,\r\n      letterSpacing: '-0.01em',\r\n      '@media (min-width:600px)': {\r\n        fontSize: '2rem',\r\n      },\r\n    },\r\n    h3: {\r\n      fontSize: '1.375rem',\r\n      fontWeight: 600,\r\n      '@media (min-width:600px)': {\r\n        fontSize: '1.75rem',\r\n      },\r\n    },\r\n    h4: {\r\n      fontSize: '1.25rem',\r\n      fontWeight: 600,\r\n      '@media (min-width:600px)': {\r\n        fontSize: '1.5rem',\r\n      },\r\n    },\r\n    h5: {\r\n      fontSize: '1.125rem',\r\n      fontWeight: 600,\r\n      '@media (min-width:600px)': {\r\n        fontSize: '1.25rem',\r\n      },\r\n    },\r\n    h6: {\r\n      fontSize: '1rem',\r\n      fontWeight: 600,\r\n      '@media (min-width:600px)': {\r\n        fontSize: '1.125rem',\r\n      },\r\n    },\r\n    body1: {\r\n      fontSize: '0.875rem',\r\n      lineHeight: 1.6,\r\n      '@media (min-width:600px)': {\r\n        fontSize: '1rem',\r\n      },\r\n    },\r\n    body2: {\r\n      fontSize: '0.75rem',\r\n      lineHeight: 1.5,\r\n      '@media (min-width:600px)': {\r\n        fontSize: '0.875rem',\r\n      },\r\n    },\r\n  },\r\n  shape: {\r\n    borderRadius: 16, // iOS-style rounded corners\r\n  },\r\n  shadows: [\r\n    'none',\r\n    glassMorphism.shadow.soft,\r\n    glassMorphism.shadow.soft,\r\n    glassMorphism.shadow.medium,\r\n    glassMorphism.shadow.medium,\r\n    glassMorphism.shadow.medium,\r\n    glassMorphism.shadow.strong,\r\n    glassMorphism.shadow.strong,\r\n    glassMorphism.shadow.strong,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n    glassMorphism.shadow.glass,\r\n  ],\r\n  components: {\r\n    MuiCssBaseline: {\r\n      styleOverrides: {\r\n        body: {\r\n          background: `\r\n            linear-gradient(135deg, \r\n              rgba(74, 144, 226, 0.1) 0%, \r\n              rgba(102, 126, 234, 0.1) 100%\r\n            )\r\n          `,\r\n          minHeight: '100vh',\r\n          WebkitBackdropFilter: glassMorphism.backdrop,\r\n          backdropFilter: glassMorphism.backdrop,\r\n        },\r\n      },\r\n    },\r\n    MuiPaper: {\r\n      styleOverrides: {\r\n        root: {\r\n          backgroundColor: colors.background.paper,\r\n          backdropFilter: glassMorphism.backdrop,\r\n          WebkitBackdropFilter: glassMorphism.backdrop,\r\n          border: `1px solid ${glassMorphism.border}`,\r\n          borderRadius: 16,\r\n        },\r\n      },\r\n    },\r\n    MuiCard: {\r\n      styleOverrides: {\r\n        root: {\r\n          backgroundColor: colors.background.glass,\r\n          backdropFilter: glassMorphism.backdropSecondary,\r\n          WebkitBackdropFilter: glassMorphism.backdropSecondary,\r\n          border: `1px solid ${glassMorphism.border}`,\r\n          borderRadius: 20,\r\n          boxShadow: glassMorphism.shadow.glass,\r\n          transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n          '&:hover': {\r\n            transform: 'translateY(-4px)',\r\n            boxShadow: glassMorphism.shadow.strong,\r\n          },\r\n        },\r\n      },\r\n    },\r\n    MuiButton: {\r\n      styleOverrides: {\r\n        root: {\r\n          borderRadius: 12,\r\n          textTransform: 'none',\r\n          fontWeight: 600,\r\n          backdropFilter: glassMorphism.backdrop,\r\n          WebkitBackdropFilter: glassMorphism.backdrop,\r\n          transition: 'all 0.2s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        },\r\n        contained: {\r\n          backgroundColor: colors.primary.main,\r\n          color: 'white',\r\n          border: `1px solid ${glassMorphism.border}`,\r\n          '&:hover': {\r\n            backgroundColor: colors.primary.dark,\r\n            transform: 'translateY(-2px)',\r\n            boxShadow: glassMorphism.shadow.medium,\r\n          },\r\n        },\r\n        outlined: {\r\n          backgroundColor: colors.background.glassSecondary,\r\n          backdropFilter: glassMorphism.backdrop,\r\n          WebkitBackdropFilter: glassMorphism.backdrop,\r\n          border: `1px solid ${glassMorphism.border}`,\r\n          '&:hover': {\r\n            backgroundColor: colors.background.glass,\r\n            transform: 'translateY(-1px)',\r\n          },\r\n        },\r\n      },\r\n    },\r\n    MuiAppBar: {\r\n      styleOverrides: {\r\n        root: {\r\n          backgroundColor: colors.background.glass,\r\n          backdropFilter: glassMorphism.backdrop,\r\n          WebkitBackdropFilter: glassMorphism.backdrop,\r\n          border: 'none',\r\n          borderBottom: `1px solid ${glassMorphism.border}`,\r\n          boxShadow: 'none',\r\n        },\r\n      },\r\n    },\r\n    MuiTextField: {\r\n      styleOverrides: {\r\n        root: {\r\n          '& .MuiOutlinedInput-root': {\r\n            backgroundColor: colors.background.glassSecondary,\r\n            backdropFilter: glassMorphism.backdrop,\r\n            WebkitBackdropFilter: glassMorphism.backdrop,\r\n            borderRadius: { xs: 8, sm: 12 },\r\n            fontSize: { xs: '14px', sm: '16px' },\r\n            minHeight: { xs: '40px', sm: '48px' },\r\n            '& fieldset': {\r\n              border: `1px solid ${glassMorphism.border}`,\r\n            },\r\n            '&:hover fieldset': {\r\n              border: `1px solid ${colors.primary.light}`,\r\n            },\r\n            '&.Mui-focused fieldset': {\r\n              border: `2px solid ${colors.primary.main}`,\r\n            },\r\n            '&.MuiInputBase-sizeSmall': {\r\n              minHeight: { xs: '36px', sm: '40px' },\r\n              fontSize: { xs: '13px', sm: '14px' },\r\n            },\r\n          },\r\n          '& .MuiInputBase-input': {\r\n            padding: { xs: '8px 12px', sm: '12px 16px' },\r\n            fontSize: { xs: '14px', sm: '16px' },\r\n            '&.MuiInputBase-inputSizeSmall': {\r\n              padding: { xs: '6px 10px', sm: '8px 12px' },\r\n              fontSize: { xs: '13px', sm: '14px' },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nconst theme = createTheme(themeOptions);\r\n\r\n// Extend theme with custom properties\r\ndeclare module '@mui/material/styles' {\r\n  interface Palette {\r\n    glass: {\r\n      primary: string;\r\n      secondary: string;\r\n      tertiary: string;\r\n    };\r\n    accent: {\r\n      green: string;\r\n      orange: string;\r\n      purple: string;\r\n      pink: string;\r\n    };\r\n  }\r\n\r\n  interface PaletteOptions {\r\n    glass?: {\r\n      primary?: string;\r\n      secondary?: string;\r\n      tertiary?: string;\r\n    };\r\n    accent?: {\r\n      green?: string;\r\n      orange?: string;\r\n      purple?: string;\r\n      pink?: string;\r\n    };\r\n  }\r\n}\r\n\r\n// Add custom properties to theme\r\nexport const liquidGlassTheme = createTheme({\r\n  ...themeOptions,\r\n  palette: {\r\n    ...themeOptions.palette,\r\n    glass: {\r\n      primary: colors.surface.primary,\r\n      secondary: colors.surface.secondary,\r\n      tertiary: colors.surface.tertiary,\r\n    },\r\n    accent: colors.accent,\r\n  },\r\n});\r\n\r\nexport default liquidGlassTheme; "],"names":[],"mappings":";;;;AAEA;AAFA;;AAIA,iCAAiC;AACjC,MAAM,SAAS;IACb,SAAS;QACP,MAAM;QACN,OAAO;QACP,MAAM;IACR;IACA,WAAW;QACT,MAAM;QACN,OAAO;QACP,MAAM;IACR;IACA,YAAY;QACV,SAAS;QACT,OAAO;QACP,OAAO;QACP,gBAAgB;IAClB;IACA,SAAS;QACP,SAAS;QACT,WAAW;QACX,UAAU;IACZ;IACA,QAAQ;QACN,OAAO;QACP,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;AACF;AAEA,mCAAmC;AACnC,MAAM,gBAAgB;IACpB,UAAU;IACV,mBAAmB;IACnB,QAAQ;QACN,OAAO;QACP,MAAM;QACN,QAAQ;QACR,QAAQ;IACV;IACA,QAAQ;AACV;AAEA,MAAM,eAA6B;IACjC,SAAS;QACP,MAAM;QACN,SAAS,OAAO,OAAO;QACvB,WAAW,OAAO,SAAS;QAC3B,YAAY,OAAO,UAAU;QAC7B,MAAM;YACJ,SAAS;YACT,WAAW;QACb;IACF;IACA,YAAY;QACV,YAAY;YACV;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD,CAAC,IAAI,CAAC;QACP,IAAI;YACF,UAAU;YACV,YAAY;YACZ,eAAe;YACf,4BAA4B;gBAC1B,UAAU;YACZ;QACF;QACA,IAAI;YACF,UAAU;YACV,YAAY;YACZ,eAAe;YACf,4BAA4B;gBAC1B,UAAU;YACZ;QACF;QACA,IAAI;YACF,UAAU;YACV,YAAY;YACZ,4BAA4B;gBAC1B,UAAU;YACZ;QACF;QACA,IAAI;YACF,UAAU;YACV,YAAY;YACZ,4BAA4B;gBAC1B,UAAU;YACZ;QACF;QACA,IAAI;YACF,UAAU;YACV,YAAY;YACZ,4BAA4B;gBAC1B,UAAU;YACZ;QACF;QACA,IAAI;YACF,UAAU;YACV,YAAY;YACZ,4BAA4B;gBAC1B,UAAU;YACZ;QACF;QACA,OAAO;YACL,UAAU;YACV,YAAY;YACZ,4BAA4B;gBAC1B,UAAU;YACZ;QACF;QACA,OAAO;YACL,UAAU;YACV,YAAY;YACZ,4BAA4B;gBAC1B,UAAU;YACZ;QACF;IACF;IACA,OAAO;QACL,cAAc;IAChB;IACA,SAAS;QACP;QACA,cAAc,MAAM,CAAC,IAAI;QACzB,cAAc,MAAM,CAAC,IAAI;QACzB,cAAc,MAAM,CAAC,MAAM;QAC3B,cAAc,MAAM,CAAC,MAAM;QAC3B,cAAc,MAAM,CAAC,MAAM;QAC3B,cAAc,MAAM,CAAC,MAAM;QAC3B,cAAc,MAAM,CAAC,MAAM;QAC3B,cAAc,MAAM,CAAC,MAAM;QAC3B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;QAC1B,cAAc,MAAM,CAAC,KAAK;KAC3B;IACD,YAAY;QACV,gBAAgB;YACd,gBAAgB;gBACd,MAAM;oBACJ,YAAY,CAAC;;;;;UAKb,CAAC;oBACD,WAAW;oBACX,sBAAsB,cAAc,QAAQ;oBAC5C,gBAAgB,cAAc,QAAQ;gBACxC;YACF;QACF;QACA,UAAU;YACR,gBAAgB;gBACd,MAAM;oBACJ,iBAAiB,OAAO,UAAU,CAAC,KAAK;oBACxC,gBAAgB,cAAc,QAAQ;oBACtC,sBAAsB,cAAc,QAAQ;oBAC5C,QAAQ,CAAC,UAAU,EAAE,cAAc,MAAM,EAAE;oBAC3C,cAAc;gBAChB;YACF;QACF;QACA,SAAS;YACP,gBAAgB;gBACd,MAAM;oBACJ,iBAAiB,OAAO,UAAU,CAAC,KAAK;oBACxC,gBAAgB,cAAc,iBAAiB;oBAC/C,sBAAsB,cAAc,iBAAiB;oBACrD,QAAQ,CAAC,UAAU,EAAE,cAAc,MAAM,EAAE;oBAC3C,cAAc;oBACd,WAAW,cAAc,MAAM,CAAC,KAAK;oBACrC,YAAY;oBACZ,WAAW;wBACT,WAAW;wBACX,WAAW,cAAc,MAAM,CAAC,MAAM;oBACxC;gBACF;YACF;QACF;QACA,WAAW;YACT,gBAAgB;gBACd,MAAM;oBACJ,cAAc;oBACd,eAAe;oBACf,YAAY;oBACZ,gBAAgB,cAAc,QAAQ;oBACtC,sBAAsB,cAAc,QAAQ;oBAC5C,YAAY;gBACd;gBACA,WAAW;oBACT,iBAAiB,OAAO,OAAO,CAAC,IAAI;oBACpC,OAAO;oBACP,QAAQ,CAAC,UAAU,EAAE,cAAc,MAAM,EAAE;oBAC3C,WAAW;wBACT,iBAAiB,OAAO,OAAO,CAAC,IAAI;wBACpC,WAAW;wBACX,WAAW,cAAc,MAAM,CAAC,MAAM;oBACxC;gBACF;gBACA,UAAU;oBACR,iBAAiB,OAAO,UAAU,CAAC,cAAc;oBACjD,gBAAgB,cAAc,QAAQ;oBACtC,sBAAsB,cAAc,QAAQ;oBAC5C,QAAQ,CAAC,UAAU,EAAE,cAAc,MAAM,EAAE;oBAC3C,WAAW;wBACT,iBAAiB,OAAO,UAAU,CAAC,KAAK;wBACxC,WAAW;oBACb;gBACF;YACF;QACF;QACA,WAAW;YACT,gBAAgB;gBACd,MAAM;oBACJ,iBAAiB,OAAO,UAAU,CAAC,KAAK;oBACxC,gBAAgB,cAAc,QAAQ;oBACtC,sBAAsB,cAAc,QAAQ;oBAC5C,QAAQ;oBACR,cAAc,CAAC,UAAU,EAAE,cAAc,MAAM,EAAE;oBACjD,WAAW;gBACb;YACF;QACF;QACA,cAAc;YACZ,gBAAgB;gBACd,MAAM;oBACJ,4BAA4B;wBAC1B,iBAAiB,OAAO,UAAU,CAAC,cAAc;wBACjD,gBAAgB,cAAc,QAAQ;wBACtC,sBAAsB,cAAc,QAAQ;wBAC5C,cAAc;4BAAE,IAAI;4BAAG,IAAI;wBAAG;wBAC9B,UAAU;4BAAE,IAAI;4BAAQ,IAAI;wBAAO;wBACnC,WAAW;4BAAE,IAAI;4BAAQ,IAAI;wBAAO;wBACpC,cAAc;4BACZ,QAAQ,CAAC,UAAU,EAAE,cAAc,MAAM,EAAE;wBAC7C;wBACA,oBAAoB;4BAClB,QAAQ,CAAC,UAAU,EAAE,OAAO,OAAO,CAAC,KAAK,EAAE;wBAC7C;wBACA,0BAA0B;4BACxB,QAAQ,CAAC,UAAU,EAAE,OAAO,OAAO,CAAC,IAAI,EAAE;wBAC5C;wBACA,4BAA4B;4BAC1B,WAAW;gCAAE,IAAI;gCAAQ,IAAI;4BAAO;4BACpC,UAAU;gCAAE,IAAI;gCAAQ,IAAI;4BAAO;wBACrC;oBACF;oBACA,yBAAyB;wBACvB,SAAS;4BAAE,IAAI;4BAAY,IAAI;wBAAY;wBAC3C,UAAU;4BAAE,IAAI;4BAAQ,IAAI;wBAAO;wBACnC,iCAAiC;4BAC/B,SAAS;gCAAE,IAAI;gCAAY,IAAI;4BAAW;4BAC1C,UAAU;gCAAE,IAAI;gCAAQ,IAAI;4BAAO;wBACrC;oBACF;gBACF;YACF;QACF;IACF;AACF;AAEA,MAAM,QAAQ,CAAA,GAAA,2MAAA,CAAA,cAAW,AAAD,EAAE;AAkCnB,MAAM,mBAAmB,CAAA,GAAA,2MAAA,CAAA,cAAW,AAAD,EAAE;IAC1C,GAAG,YAAY;IACf,SAAS;QACP,GAAG,aAAa,OAAO;QACvB,OAAO;YACL,SAAS,OAAO,OAAO,CAAC,OAAO;YAC/B,WAAW,OAAO,OAAO,CAAC,SAAS;YACnC,UAAU,OAAO,OAAO,CAAC,QAAQ;QACnC;QACA,QAAQ,OAAO,MAAM;IACvB;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/theredpotion/apps/customer/src/app/utils/liff.ts"],"sourcesContent":["// LIFF Environment Detection and Utilities\r\n\r\nexport const isInLiffEnvironment = (): boolean => {\r\n  if (typeof window === 'undefined') return false;\r\n  \r\n  const userAgent = window.navigator.userAgent;\r\n  const href = window.location.href;\r\n  const hostname = window.location.hostname;\r\n  \r\n  // Primary LIFF indicators\r\n  const isLiffUrl = href.includes('liff://') || href.includes('liff-');\r\n  const isLiffHostname = hostname.includes('liff');\r\n  \r\n  // LINE browser indicators (less strict)\r\n  const isLineUA = userAgent.includes('Line') || userAgent.includes('LINE');\r\n  \r\n  console.log('LIFF Detection:', {\r\n    userAgent,\r\n    href,\r\n    hostname,\r\n    isLiffUrl,\r\n    isLiffHostname,\r\n    isLineUA\r\n  });\r\n  \r\n  // Only consider it LIFF if we have strong indicators\r\n  return isLiffUrl || isLiffHostname;\r\n};\r\n\r\nexport const waitForLiffReady = async (timeout: number = 3000): Promise<boolean> => {\r\n  if (!isInLiffEnvironment()) return true;\r\n  \r\n  return new Promise((resolve) => {\r\n    const startTime = Date.now();\r\n    let attempts = 0;\r\n    const maxAttempts = 30; // 3 seconds / 100ms = 30 attempts\r\n    \r\n    const checkReady = () => {\r\n      attempts++;\r\n      \r\n      // Timeout or max attempts reached - just proceed\r\n      if (Date.now() - startTime > timeout || attempts >= maxAttempts) {\r\n        console.log('LIFF timeout reached, proceeding anyway');\r\n        resolve(true);\r\n        return;\r\n      }\r\n      \r\n              // If LIFF exists, try to check if it's ready\r\n        if (typeof window !== 'undefined' && window.liff) {\r\n          try {\r\n            // Try different ways to check if LIFF is ready\r\n            if (typeof window.liff.isLoggedIn === 'function') {\r\n              resolve(true);\r\n              return;\r\n            }\r\n            if (window.liff.ready && typeof window.liff.ready === 'object') {\r\n              resolve(true);\r\n              return;\r\n            }\r\n          } catch (error) {\r\n            // LIFF might not be fully ready yet, continue checking\r\n          }\r\n        }\r\n      \r\n      // If we're in LIFF but no LIFF object yet, wait a bit more\r\n      // But if too many attempts, just proceed\r\n      if (attempts < 10) {\r\n        setTimeout(checkReady, 100);\r\n      } else {\r\n        // After 1 second, just proceed regardless\r\n        console.log('LIFF not detected after 1s, proceeding anyway');\r\n        resolve(true);\r\n      }\r\n    };\r\n    \r\n    checkReady();\r\n  });\r\n};\r\n\r\nexport const getLiffDelay = (): number => {\r\n  return isInLiffEnvironment() ? 500 : 0; // Reduced from 1000ms to 500ms\r\n};\r\n\r\n// Safe localStorage access for LIFF\r\nexport const safeLSGetItem = (key: string): string | null => {\r\n  try {\r\n    if (typeof window === 'undefined') return null;\r\n    return localStorage.getItem(key);\r\n  } catch (error) {\r\n    console.warn('localStorage.getItem failed:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const safeLSSetItem = (key: string, value: string): boolean => {\r\n  try {\r\n    if (typeof window === 'undefined') return false;\r\n    localStorage.setItem(key, value);\r\n    return true;\r\n  } catch (error) {\r\n    console.warn('localStorage.setItem failed:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const safeLSRemoveItem = (key: string): boolean => {\r\n  try {\r\n    if (typeof window === 'undefined') return false;\r\n    localStorage.removeItem(key);\r\n    return true;\r\n  } catch (error) {\r\n    console.warn('localStorage.removeItem failed:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Type declarations\r\ndeclare global {\r\n  interface Window {\r\n    liff?: {\r\n      isLoggedIn: () => boolean;\r\n      init: (config: any) => Promise<void>;\r\n      ready: Promise<void>;\r\n      [key: string]: any;\r\n    };\r\n  }\r\n} "],"names":[],"mappings":"AAAA,2CAA2C;;;;;;;;;AAEpC,MAAM,sBAAsB;IACjC,wCAAmC,OAAO;;IAE1C,MAAM;IACN,MAAM;IACN,MAAM;IAEN,0BAA0B;IAC1B,MAAM;IACN,MAAM;IAEN,wCAAwC;IACxC,MAAM;AAaR;AAEO,MAAM,mBAAmB,OAAO,UAAkB,IAAI;IAC3D,IAAI,CAAC,uBAAuB,OAAO;IAEnC,OAAO,IAAI,QAAQ,CAAC;QAClB,MAAM,YAAY,KAAK,GAAG;QAC1B,IAAI,WAAW;QACf,MAAM,cAAc,IAAI,kCAAkC;QAE1D,MAAM,aAAa;YACjB;YAEA,iDAAiD;YACjD,IAAI,KAAK,GAAG,KAAK,YAAY,WAAW,YAAY,aAAa;gBAC/D,QAAQ,GAAG,CAAC;gBACZ,QAAQ;gBACR;YACF;YAEQ,6CAA6C;YACnD,uCAAkD;;YAclD;YAEF,2DAA2D;YAC3D,yCAAyC;YACzC,IAAI,WAAW,IAAI;gBACjB,WAAW,YAAY;YACzB,OAAO;gBACL,0CAA0C;gBAC1C,QAAQ,GAAG,CAAC;gBACZ,QAAQ;YACV;QACF;QAEA;IACF;AACF;AAEO,MAAM,eAAe;IAC1B,OAAO,wBAAwB,MAAM,GAAG,+BAA+B;AACzE;AAGO,MAAM,gBAAgB,CAAC;IAC5B,IAAI;QACF,wCAAmC,OAAO;;IAE5C,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,gCAAgC;QAC7C,OAAO;IACT;AACF;AAEO,MAAM,gBAAgB,CAAC,KAAa;IACzC,IAAI;QACF,wCAAmC,OAAO;;IAG5C,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,gCAAgC;QAC7C,OAAO;IACT;AACF;AAEO,MAAM,mBAAmB,CAAC;IAC/B,IAAI;QACF,wCAAmC,OAAO;;IAG5C,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,mCAAmC;QAChD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 435, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/theredpotion/apps/customer/src/app/components/LiffSafeWrapper.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, ReactNode } from 'react';\r\nimport { Box, CircularProgress } from '@mui/material';\r\nimport { isInLiffEnvironment, waitForLiffReady } from '../utils/liff';\r\n\r\ninterface LiffSafeWrapperProps {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n}\r\n\r\nexport default function LiffSafeWrapper({ children, fallback }: LiffSafeWrapperProps) {\r\n  const [isLiffReady, setIsLiffReady] = useState(false);\r\n  const [isClient, setIsClient] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check if we're in client-side\r\n    setIsClient(true);\r\n\r\n    const initLiff = async () => {\r\n      if (isInLiffEnvironment()) {\r\n        console.log('LIFF environment detected, waiting for LIFF ready...');\r\n        // LIFF environment - wait for LIFF to be ready with shorter timeout\r\n        const isReady = await waitForLiffReady(2000); // 2 second timeout\r\n        console.log('LIFF ready status:', isReady);\r\n        setIsLiffReady(true); // Always set to true regardless of LIFF status\r\n      } else {\r\n        // Normal browser - ready immediately after client mount\r\n        setIsLiffReady(true);\r\n      }\r\n    };\r\n\r\n    // Add a fallback timer to ensure we never get stuck\r\n    const fallbackTimer = setTimeout(() => {\r\n      console.log('Fallback timer triggered, proceeding anyway');\r\n      setIsClient(true);\r\n      setIsLiffReady(true);\r\n    }, 3000); // 3 second absolute maximum\r\n\r\n    initLiff().finally(() => {\r\n      clearTimeout(fallbackTimer);\r\n    });\r\n\r\n    return () => {\r\n      clearTimeout(fallbackTimer);\r\n    };\r\n  }, []);\r\n\r\n  // Show loading while waiting for client-side hydration or LIFF ready\r\n  if (!isClient || !isLiffReady) {\r\n    return (\r\n      fallback || (\r\n        <Box sx={{ \r\n          height: '100vh',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          background: `\r\n            linear-gradient(135deg, \r\n              rgba(16, 185, 129, 0.08) 0%, \r\n              rgba(5, 150, 105, 0.05) 25%,\r\n              rgba(52, 211, 153, 0.03) 50%,\r\n              rgba(255, 255, 255, 0.95) 75%,\r\n              rgba(248, 250, 252, 1) 100%\r\n            )\r\n          `\r\n        }}>\r\n          <CircularProgress size={60} sx={{ color: '#10b981' }} />\r\n        </Box>\r\n      )\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n\r\n "],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAWe,SAAS,gBAAgB,EAAE,QAAQ,EAAE,QAAQ,EAAwB;IAClF,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,gCAAgC;QAChC,YAAY;QAEZ,MAAM,WAAW;YACf,IAAI,CAAA,GAAA,+IAAA,CAAA,sBAAmB,AAAD,KAAK;gBACzB,QAAQ,GAAG,CAAC;gBACZ,oEAAoE;gBACpE,MAAM,UAAU,MAAM,CAAA,GAAA,+IAAA,CAAA,mBAAgB,AAAD,EAAE,OAAO,mBAAmB;gBACjE,QAAQ,GAAG,CAAC,sBAAsB;gBAClC,eAAe,OAAO,+CAA+C;YACvE,OAAO;gBACL,wDAAwD;gBACxD,eAAe;YACjB;QACF;QAEA,oDAAoD;QACpD,MAAM,gBAAgB,WAAW;YAC/B,QAAQ,GAAG,CAAC;YACZ,YAAY;YACZ,eAAe;QACjB,GAAG,OAAO,4BAA4B;QAEtC,WAAW,OAAO,CAAC;YACjB,aAAa;QACf;QAEA,OAAO;YACL,aAAa;QACf;IACF,GAAG,EAAE;IAEL,qEAAqE;IACrE,IAAI,CAAC,YAAY,CAAC,aAAa;QAC7B,OACE,0BACE,8OAAC,wLAAA,CAAA,MAAG;YAAC,IAAI;gBACP,QAAQ;gBACR,SAAS;gBACT,YAAY;gBACZ,gBAAgB;gBAChB,YAAY,CAAC;;;;;;;;UAQb,CAAC;YACH;sBACE,cAAA,8OAAC,+NAAA,CAAA,mBAAgB;gBAAC,MAAM;gBAAI,IAAI;oBAAE,OAAO;gBAAU;;;;;;;;;;;IAI3D;IAEA,qBAAO;kBAAG;;AACZ","debugId":null}}]
}